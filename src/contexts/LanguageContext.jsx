import React, { createContext, useContext, useState, useEffect } from 'react';

const LanguageContext = createContext();

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};

const translations = {
  en: {
    // Navigation
    dashboard: 'Dashboard',
    practice: 'Practice',
    miniGames: 'Mini Games',
    stories: 'Math Stories',
    shop: 'Shop',
    leaderboard: 'Leaderboard',
    profile: 'Profile',
    premium: 'Premium',
    login: 'Login',
    register: 'Register',
    logout: 'Logout',

    // Auth
    email: 'Email',
    password: 'Password',
    confirmPassword: 'Confirm Password',
    loginToAccount: 'Login to your account',
    createAccount: 'Create new account',
    forgotPassword: 'Forgot password?',
    alreadyHaveAccount: 'Already have an account?',
    dontHaveAccount: "Don't have an account?",
    signIn: 'Sign In',
    signUp: 'Sign Up',

    // Common
    start: 'Start',
    play: 'Play',
    next: 'Next',
    back: 'Back',
    continue: 'Continue',
    correct: 'Correct!',
    incorrect: 'Try Again!',
    wellDone: 'Well Done!',
    amazing: 'Amazing!',
    fantastic: 'Fantastic!',
    timeUp: "Time's up!",
    theAnswerWas: 'The answer was',

    // Onboarding
    welcome: 'Welcome to Math Hero!',
    selectLanguage: 'Select Language',
    enterName: 'Enter your name',
    enterAge: 'How old are you?',
    chooseAvatar: 'Choose your avatar',
    enterEmail: 'Enter email (optional)',
    enterLocation: 'Where are you from?',
    chooseDifficulty: 'Choose difficulty',
    easy: 'Easy',
    medium: 'Medium',
    hard: 'Hard',

    // Math Operations
    addition: 'Addition',
    subtraction: 'Subtraction',
    multiplication: 'Multiplication',
    division: 'Division',
    fractions: 'Fractions',
    percentages: 'Percentages',
    multiplicationTables: 'Multiplication Tables',

    // Games
    pacmanMath: 'Pac-Man Math',
    slotMachine: 'Slot Machine Math',
    memoryGame: 'Memory Pairs',
    battleshipMath: 'Battleship Math',
    sudokuGame: 'Math Sudoku',
    hangmanMath: 'Hangman Math',
    pizzaFractions: 'Pizza Fractions',

    // Shop
    coins: 'Coins',
    buy: 'Buy',
    owned: 'Owned',
    myItems: 'My Items',

    // Achievements
    achievements: 'Achievements',
    streak: 'Streak',
    level: 'Level',

    // Premium
    upgradeToPremium: 'Upgrade to Premium',
    unlockAllGames: 'Unlock All Games',
    monthly: 'Monthly',
    yearly: 'Yearly',

    // Stories
    pirateTreasure: 'Pirate Treasure Adventure',
    dinoEggs: 'Dinosaur Egg Hunt',
    mathDetective: 'Math Detective Agency',
    spaceMission: 'Space Mission: Planet Math',
    bakeryFractions: 'Bakery Fraction Fun',

    // Story Content
    pirateTreasureStory1: "Ahoy there, matey! I'm Captain Math, and I need your help to find my buried treasure! üè¥‚Äç‚ò†Ô∏è",
    pirateTreasureStory2: "I have 24 gold coins that I need to divide equally among my 3 crew members. How many coins will each pirate get?",
    pirateTreasureStory3: "Excellent work! Each pirate gets 8 coins. Now we need to find the treasure location using map coordinates!",
    pirateTreasureStory4: "The treasure map shows X marks the spot at coordinates (5 + 3, 6 + 2). What are the exact coordinates?",
    pirateTreasureStory5: "Perfect! The treasure is at coordinates (8,8). Let's dig there and see what we find!",
    pirateTreasureStory6: "We found a chest! But it has a combination lock. The numbers are: 3 √ó 4 = ?",
    pirateTreasureStory7: "Amazing! The chest opens and reveals 100 gold coins! You're a true math pirate! üèÜ",

    dinoEggsStory1: "Hi there! I'm Tina T-Rex, and I need your help! I found some dinosaur eggs that need to be put in nests! ü¶ñ",
    dinoEggsStory2: "I found 12 dinosaur eggs and I have 3 nests. How many eggs should go in each nest so they're all equal?",
    dinoEggsStory3: "Great job! 4 eggs in each nest. But wait, I found more eggs! Now I have 6 nests with 3 eggs each. How many eggs is that total?",
    dinoEggsStory4: "Fantastic! 18 eggs total! Oh no, some baby dinosaurs hatched! If 5 eggs hatched, how many eggs are left?",
    dinoEggsStory5: "Perfect! 13 eggs are still left. The baby dinosaurs are so cute! Let's count them: 2 + 2 + 1 = ?",
    dinoEggsStory6: "Excellent! 5 baby dinosaurs! You're an amazing helper! Thanks for helping me organize all the eggs and count the babies! üéâ",

    // Hangman Math
    solveToReveal: 'Solve math problems to reveal the number!',
    hangmanHint: 'Solve the math problem to save the stick figure!',
    mathProblem: 'Math Problem',
    selectAnswer: 'Select the correct answer:',
    wrongAnswer: 'Wrong answer! Try again!',
    correctAnswer: 'Correct! Well done!',
    gameOver: 'Game Over!',
    youWin: 'You Win!',

    // Settings
    backgroundMusic: 'Background Music',
    soundEffects: 'Sound Effects',
    enablePercentages: 'Enable Percentages'
  },

  de: {
    // Navigation
    dashboard: 'Dashboard',
    practice: '√úben',
    miniGames: 'Mini-Spiele',
    stories: 'Mathe-Geschichten',
    shop: 'Shop',
    leaderboard: 'Bestenliste',
    profile: 'Profil',
    premium: 'Premium',
    login: 'Anmelden',
    register: 'Registrieren',
    logout: 'Abmelden',

    // Auth
    email: 'E-Mail',
    password: 'Passwort',
    confirmPassword: 'Passwort best√§tigen',
    loginToAccount: 'In Ihr Konto einloggen',
    createAccount: 'Neues Konto erstellen',
    forgotPassword: 'Passwort vergessen?',
    alreadyHaveAccount: 'Haben Sie bereits ein Konto?',
    dontHaveAccount: 'Haben Sie noch kein Konto?',
    signIn: 'Einloggen',
    signUp: 'Registrieren',

    // Common
    start: 'Start',
    play: 'Spielen',
    next: 'Weiter',
    back: 'Zur√ºck',
    continue: 'Weiter',
    correct: 'Richtig!',
    incorrect: 'Versuche es nochmal!',
    wellDone: 'Gut gemacht!',
    amazing: 'Fantastisch!',
    fantastic: 'Gro√üartig!',
    timeUp: 'Zeit ist um!',
    theAnswerWas: 'Die Antwort war',

    // Onboarding
    welcome: 'Willkommen bei Math Hero!',
    selectLanguage: 'Sprache w√§hlen',
    enterName: 'Gib deinen Namen ein',
    enterAge: 'Wie alt bist du?',
    chooseAvatar: 'W√§hle deinen Avatar',
    enterEmail: 'E-Mail eingeben (optional)',
    enterLocation: 'Wo kommst du her?',
    chooseDifficulty: 'Schwierigkeit w√§hlen',
    easy: 'Einfach',
    medium: 'Mittel',
    hard: 'Schwer',

    // Math Operations
    addition: 'Addition',
    subtraction: 'Subtraktion',  
    multiplication: 'Multiplikation',
    division: 'Division',
    fractions: 'Br√ºche',
    percentages: 'Prozente',
    multiplicationTables: 'Einmaleins',

    // Games
    pacmanMath: 'Pac-Man Mathe',
    slotMachine: 'Spielautomat Mathe',
    memoryGame: 'Memory Paare',
    battleshipMath: 'Schiffe versenken Mathe',
    sudokuGame: 'Mathe Sudoku',
    hangmanMath: 'Galgenm√§nnchen Mathe',
    pizzaFractions: 'Pizza Br√ºche',

    // Shop
    coins: 'M√ºnzen',
    buy: 'Kaufen',
    owned: 'Besitzt',
    myItems: 'Meine Gegenst√§nde',

    // Achievements
    achievements: 'Erfolge',
    streak: 'Serie',
    level: 'Level',

    // Premium
    upgradeToPremium: 'Premium upgraden',
    unlockAllGames: 'Alle Spiele freischalten',
    monthly: 'Monatlich',
    yearly: 'J√§hrlich',

    // Stories
    pirateTreasure: 'Piraten-Schatz Abenteuer',
    dinoEggs: 'Dinosaurier-Eier Jagd',
    mathDetective: 'Mathe-Detektiv Agentur',
    spaceMission: 'Weltraum-Mission: Planet Mathe',
    bakeryFractions: 'B√§ckerei Bruch-Spa√ü',

    // Story Content
    pirateTreasureStory1: "Ahoi Matrose! Ich bin Kapit√§n Mathe und brauche deine Hilfe, meinen vergrabenen Schatz zu finden! üè¥‚Äç‚ò†Ô∏è",
    pirateTreasureStory2: "Ich habe 24 Goldm√ºnzen, die ich gleichm√§√üig unter meinen 3 Besatzungsmitgliedern aufteilen muss. Wie viele M√ºnzen bekommt jeder Pirat?",
    pirateTreasureStory3: "Ausgezeichnete Arbeit! Jeder Pirat bekommt 8 M√ºnzen. Jetzt m√ºssen wir den Schatzort mit Kartenkoordinaten finden!",
    pirateTreasureStory4: "Die Schatzkarte zeigt X markiert die Stelle bei Koordinaten (5 + 3, 6 + 2). Was sind die genauen Koordinaten?",
    pirateTreasureStory5: "Perfekt! Der Schatz ist bei Koordinaten (8,8). Lass uns dort graben und schauen, was wir finden!",
    pirateTreasureStory6: "Wir haben eine Truhe gefunden! Aber sie hat ein Zahlenschloss. Die Zahlen sind: 3 √ó 4 = ?",
    pirateTreasureStory7: "Fantastisch! Die Truhe √∂ffnet sich und enth√ºllt 100 Goldm√ºnzen! Du bist ein wahrer Mathe-Pirat! üèÜ",

    dinoEggsStory1: "Hallo! Ich bin Tina T-Rex und brauche deine Hilfe! Ich habe Dinosaurier-Eier gefunden, die in Nester gelegt werden m√ºssen! ü¶ñ",
    dinoEggsStory2: "Ich habe 12 Dinosaurier-Eier gefunden und habe 3 Nester. Wie viele Eier sollen in jedes Nest, damit alle gleich sind?",
    dinoEggsStory3: "Gut gemacht! 4 Eier in jedem Nest. Aber warte, ich habe mehr Eier gefunden! Jetzt habe ich 6 Nester mit 3 Eiern in jedem. Wie viele Eier sind das insgesamt?",
    dinoEggsStory4: "Fantastisch! 18 Eier insgesamt! Oh nein, einige Baby-Dinosaurier sind geschl√ºpft! Wenn 5 Eier geschl√ºpft sind, wie viele Eier sind √ºbrig?",
    dinoEggsStory5: "Perfekt! 13 Eier sind noch √ºbrig. Die Baby-Dinosaurier sind so s√º√ü! Lass uns sie z√§hlen: 2 + 2 + 1 = ?",
    dinoEggsStory6: "Ausgezeichnet! 5 Baby-Dinosaurier! Du bist eine gro√üartige Hilfe! Danke, dass du mir geholfen hast, alle Eier zu organisieren und die Babys zu z√§hlen! üéâ",

    // Hangman Math
    solveToReveal: 'L√∂se Mathe-Aufgaben, um die Zahl zu enth√ºllen!',
    hangmanHint: 'L√∂se die Mathe-Aufgabe, um das Strichm√§nnchen zu retten!',
    mathProblem: 'Mathe-Aufgabe',
    selectAnswer: 'W√§hle die richtige Antwort:',
    wrongAnswer: 'Falsche Antwort! Versuche es nochmal!',
    correctAnswer: 'Richtig! Gut gemacht!',
    gameOver: 'Spiel vorbei!',
    youWin: 'Du gewinnst!',

    // Settings
    backgroundMusic: 'Hintergrundmusik',
    soundEffects: 'Soundeffekte',
    enablePercentages: 'Prozente aktivieren'
  },

  fr: {
    // Navigation
    dashboard: 'Tableau de bord',
    practice: 'Pratique',
    miniGames: 'Mini-jeux',
    stories: 'Histoires math√©matiques',
    shop: 'Boutique',
    leaderboard: 'Classement',
    profile: 'Profil',
    premium: 'Premium',
    login: 'Se connecter',
    register: "S'inscrire",
    logout: 'Se d√©connecter',

    // Auth
    email: 'Email',
    password: 'Mot de passe',
    confirmPassword: 'Confirmer le mot de passe',
    loginToAccount: 'Connectez-vous √† votre compte',
    createAccount: 'Cr√©er un nouveau compte',
    forgotPassword: 'Mot de passe oubli√©?',
    alreadyHaveAccount: 'Vous avez d√©j√† un compte?',
    dontHaveAccount: "Vous n'avez pas de compte?",
    signIn: 'Se connecter',
    signUp: "S'inscrire",

    // Common
    start: 'Commencer',
    play: 'Jouer',
    next: 'Suivant',
    back: 'Retour',
    continue: 'Continuer',
    correct: 'Correct!',
    incorrect: 'Essayez encore!',
    wellDone: 'Bien jou√©!',
    amazing: 'Incroyable!',
    fantastic: 'Fantastique!',
    timeUp: 'Temps √©coul√©!',
    theAnswerWas: 'La r√©ponse √©tait',

    // Onboarding
    welcome: 'Bienvenue dans Math Hero!',
    selectLanguage: 'S√©lectionner la langue',
    enterName: 'Entrez votre nom',
    enterAge: 'Quel √¢ge avez-vous?',
    chooseAvatar: 'Choisissez votre avatar',
    enterEmail: 'Entrez votre email (optionnel)',
    enterLocation: 'D\'o√π venez-vous?',
    chooseDifficulty: 'Choisir la difficult√©',
    easy: 'Facile',
    medium: 'Moyen',
    hard: 'Difficile',

    // Math Operations
    addition: 'Addition',
    subtraction: 'Soustraction',
    multiplication: 'Multiplication',
    division: 'Division',
    fractions: 'Fractions',
    percentages: 'Pourcentages',
    multiplicationTables: 'Tables de multiplication',

    // Games
    pacmanMath: 'Pac-Man Math',
    slotMachine: 'Machine √† sous Math',
    memoryGame: 'Paires m√©moire',
    battleshipMath: 'Bataille navale Math',
    sudokuGame: 'Sudoku Math',
    hangmanMath: 'Pendu Math',
    pizzaFractions: 'Fractions de Pizza',

    // Shop
    coins: 'Pi√®ces',
    buy: 'Acheter',
    owned: 'Poss√©d√©',
    myItems: 'Mes objets',

    // Achievements
    achievements: 'Succ√®s',
    streak: 'S√©rie',
    level: 'Niveau',

    // Premium
    upgradeToPremium: 'Passer √† Premium',
    unlockAllGames: 'D√©bloquer tous les jeux',
    monthly: 'Mensuel',
    yearly: 'Annuel',

    // Stories
    pirateTreasure: 'Aventure du Tr√©sor de Pirate',
    dinoEggs: 'Chasse aux ≈íufs de Dinosaure',
    mathDetective: 'Agence de D√©tective Math',
    spaceMission: 'Mission Spatiale: Plan√®te Math',
    bakeryFractions: 'Plaisir des Fractions de Boulangerie',

    // Story Content
    pirateTreasureStory1: "Ahoy matelot! Je suis le Capitaine Math et j'ai besoin de votre aide pour trouver mon tr√©sor enfoui! üè¥‚Äç‚ò†Ô∏è",
    pirateTreasureStory2: "J'ai 24 pi√®ces d'or que je dois diviser √©quitablement entre mes 3 membres d'√©quipage. Combien de pi√®ces chaque pirate aura-t-il?",
    pirateTreasureStory3: "Excellent travail! Chaque pirate re√ßoit 8 pi√®ces. Maintenant, nous devons trouver l'emplacement du tr√©sor en utilisant les coordonn√©es de la carte!",
    pirateTreasureStory4: "La carte au tr√©sor montre que X marque l'endroit aux coordonn√©es (5 + 3, 6 + 2). Quelles sont les coordonn√©es exactes?",
    pirateTreasureStory5: "Parfait! Le tr√©sor est aux coordonn√©es (8,8). Creusons l√† et voyons ce que nous trouvons!",
    pirateTreasureStory6: "Nous avons trouv√© un coffre! Mais il a une serrure √† combinaison. Les nombres sont: 3 √ó 4 = ?",
    pirateTreasureStory7: "Incroyable! Le coffre s'ouvre et r√©v√®le 100 pi√®ces d'or! Vous √™tes un vrai pirate des maths! üèÜ",

    dinoEggsStory1: "Salut! Je suis Tina T-Rex et j'ai besoin de votre aide! J'ai trouv√© des ≈ìufs de dinosaure qui doivent √™tre mis dans des nids! ü¶ñ",
    dinoEggsStory2: "J'ai trouv√© 12 ≈ìufs de dinosaure et j'ai 3 nids. Combien d'≈ìufs devraient aller dans chaque nid pour qu'ils soient tous √©gaux?",
    dinoEggsStory3: "Bon travail! 4 ≈ìufs dans chaque nid. Mais attendez, j'ai trouv√© plus d'≈ìufs! Maintenant j'ai 6 nids avec 3 ≈ìufs chacun. Combien d'≈ìufs cela fait-il au total?",
    dinoEggsStory4: "Fantastique! 18 ≈ìufs au total! Oh non, certains b√©b√©s dinosaures ont √©clos! Si 5 ≈ìufs ont √©clos, combien d'≈ìufs reste-t-il?",
    dinoEggsStory5: "Parfait! Il reste encore 13 ≈ìufs. Les b√©b√©s dinosaures sont si mignons! Comptons-les: 2 + 2 + 1 = ?",
    dinoEggsStory6: "Excellent! 5 b√©b√©s dinosaures! Vous √™tes une aide formidable! Merci de m'avoir aid√© √† organiser tous les ≈ìufs et √† compter les b√©b√©s! üéâ",

    // Hangman Math
    solveToReveal: 'R√©solvez les probl√®mes de maths pour r√©v√©ler le nombre!',
    hangmanHint: 'R√©solvez le probl√®me de maths pour sauver le bonhomme!',
    mathProblem: 'Probl√®me de Math',
    selectAnswer: 'S√©lectionnez la bonne r√©ponse:',
    wrongAnswer: 'Mauvaise r√©ponse! Essayez encore!',
    correctAnswer: 'Correct! Bien jou√©!',
    gameOver: 'Jeu termin√©!',
    youWin: 'Vous gagnez!',

    // Settings
    backgroundMusic: 'Musique de fond',
    soundEffects: 'Effets sonores',
    enablePercentages: 'Activer les pourcentages'
  }
};

export const LanguageProvider = ({ children }) => {
  const [language, setLanguage] = useState('en');

  useEffect(() => {
    const savedLanguage = localStorage.getItem('mathHeroLanguage');
    if (savedLanguage) {
      setLanguage(savedLanguage);
    }
  }, []);

  const changeLanguage = (lang) => {
    setLanguage(lang);
    localStorage.setItem('mathHeroLanguage', lang);
  };

  const t = (key) => {
    return translations[language][key] || key;
  };

  const value = {
    language,
    changeLanguage,
    t
  };

  return (
    <LanguageContext.Provider value={value}>
      {children}
    </LanguageContext.Provider>
  );
};